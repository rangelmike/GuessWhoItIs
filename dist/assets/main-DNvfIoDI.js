import{g as L}from"./cards-g4oblBOB.js";import{initializeApp as E}from"https://www.gstatic.com/firebasejs/9.15.0/firebase-app.js";import{getDatabase as b,ref as C,get as x,child as q}from"https://www.gstatic.com/firebasejs/9.15.0/firebase-database.js";import{GoogleAuthProvider as S,getAuth as j}from"https://www.gstatic.com/firebasejs/9.15.0/firebase-auth.js";const R={apiKey:"AIzaSyAc1-FWefRK9gNkaprncldWqK2jztLV43A",authDomain:"guesswhoitis-905ed.firebaseapp.com",databaseURL:"https://guesswhoitis-905ed-default-rtdb.firebaseio.com",projectId:"guesswhoitis-905ed",storageBucket:"guesswhoitis-905ed.firebasestorage.app",messagingSenderId:"72462712048",appId:"1:72462712048:web:a1ed1f84eb16b686b95635"},p=E(R);b(p);new S(p);j(p);const k=document.getElementById("container"),d=window.innerWidth>600?200:150,a=d==150,m=a?125:150,i=document.getElementById("backgroundMusic"),f=document.getElementById("toggleHover"),I=Array.from({length:window.innerHeight},()=>Array(window.innerWidth).fill(!1)),H=document.getElementById("settingsBtn"),y=document.getElementById("loader"),v=["https://shorturl.at/j0LqN","https://shorturl.at/VBilJ","https://shorturl.at/qIdRM","https://shorturl.at/y9yVX"];H.addEventListener("click",async n=>{window.location.href="/settings.html"});f.addEventListener("mousedown",function(){if(a)return;const n=document.querySelectorAll(".card"),t=document.querySelectorAll(".img");for(let e of n)e.classList.add("force-hover");for(let e of t)e.classList.add("force-hover")});f.addEventListener("mouseup",function(){if(a)return;const n=document.querySelectorAll(".card"),t=document.querySelectorAll(".img");for(let e of n)e.classList.remove("force-hover");for(let e of t)e.classList.remove("force-hover")});f.addEventListener("mouseleave",function(){if(a)return;const n=document.querySelectorAll(".card"),t=document.querySelectorAll(".img");for(let e of n)e.classList.remove("force-hover");for(let e of t)e.classList.remove("force-hover")});let h=!1;f.addEventListener("click",function(){if(a){if(h){const n=document.querySelectorAll(".card"),t=document.querySelectorAll(".img");for(let e of n)e.classList.remove("force-hover");for(let e of t)e.classList.remove("force-hover")}else{const n=document.querySelectorAll(".card"),t=document.querySelectorAll(".img");for(let e of n)e.classList.add("force-hover");for(let e of t)e.classList.add("force-hover")}h=!h}});function A(n,t){return Math.floor(Math.random()*(t-n+1))+n}function B({x:n,y:t},e,r){for(let s=t-10;s<t+r+11;s+=10)for(let o=n-10;o<n+e+11;o+=10)s<window.innerHeight&&o<window.innerWidth&&s>=0&&o>=0&&(I[s][o]=!0)}function M(n,t,e,r){const s=[];for(let o=60;o<=r-t-30;o+=10)for(let c=30;c<=e-n-30;c+=10){let l=!0;for(let u=o;u<o+t;u+=10){for(let g=c;g<c+n;g+=10)if(I[u][g]){l=!1;break}if(!l)break}l&&s.push({x:c,y:o})}return s}function w(n,t,e){const r=document.createElement("div");r.classList.add("card"),e&&r.classList.add("glow"),r.textContent=t;for(let c of n)L(c,r,d,m);const s=M(d,m,window.innerWidth,window.innerHeight),o=s[A(0,s.length)];o!=null&&(B(o,d,m),r.style.left=`${o.x}px`,r.style.top=`${o.y}px`,k.appendChild(r))}function W(n,t,e){if(n>t)throw new Error("No se pueden generar n números únicos entre 0 y m-1 si n > m");const r=Array.from({length:t},(c,l)=>l);for(let c=r.length-1;c>0;c--){const l=Math.floor(Math.random()*(c+1));[r[c],r[l]]=[r[l],r[c]]}const s=[];let o=0;for(;s.length<n;)r[o]!=e&&s.push(r[o]),o++;return s}function P(n){const t=C(b());return x(q(t,n)).then(e=>e.exists()?e.val():(console.log("No data available"),0)).catch(e=>(console.error(e),0))}window.onload=async function(){a&&(document.getElementById("backgroundMusic").style.width="100px",document.getElementById("toggleHover").style.right="-30px",document.getElementById("headerText").style.width="70%",document.getElementById("headerText").style.position="absolute",document.getElementById("headerText").style.left="22%"),B({x:i.getBoundingClientRect().top-i.getBoundingClientRect().top%10,y:i.getBoundingClientRect().left-i.getBoundingClientRect().left%10},i.offsetHeight,i.offsetWidth),y.style.display="block";const n=v[A(0,v.length-1)];i.src=n;const t=Object.values(await P("/"));let e=0;for(let o=1;o<t.length;o++)t.at(o).timestamp>t.at(e).timestamp&&(e=o);const r=Math.min(6,t.length),s=W(r,t.length,e);w(Object.values(t.at(e).effects),t.at(e).message,!0);for(let o=0;o<r;o++){const c=Object.values(t.at(s[o]).effects),l=t.at(s[o]).message;w(c,l)}y.style.display="none"};
