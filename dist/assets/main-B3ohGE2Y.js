import{g as L}from"./cards-Dre11RUF.js";import{initializeApp as E}from"https://www.gstatic.com/firebasejs/9.15.0/firebase-app.js";import{getDatabase as b,ref as C,get as x,child as q}from"https://www.gstatic.com/firebasejs/9.15.0/firebase-database.js";import{GoogleAuthProvider as S,getAuth as j}from"https://www.gstatic.com/firebasejs/9.15.0/firebase-auth.js";const R={apiKey:"AIzaSyAc1-FWefRK9gNkaprncldWqK2jztLV43A",authDomain:"guesswhoitis-905ed.firebaseapp.com",databaseURL:"https://guesswhoitis-905ed-default-rtdb.firebaseio.com",projectId:"guesswhoitis-905ed",storageBucket:"guesswhoitis-905ed.firebasestorage.app",messagingSenderId:"72462712048",appId:"1:72462712048:web:a1ed1f84eb16b686b95635"},p=E(R);b(p);new S(p);j(p);const k=document.getElementById("container"),d=window.innerWidth>600?200:150,a=d==150,m=a?125:150,i=document.getElementById("backgroundMusic"),f=document.getElementById("toggleHover"),I=Array.from({length:window.innerHeight},()=>Array(window.innerWidth).fill(!1)),H=document.getElementById("settingsBtn"),y=document.getElementById("loader"),v=["https://shorturl.at/j0LqN","https://shorturl.at/VBilJ","https://shorturl.at/qIdRM","https://shorturl.at/y9yVX"];H.addEventListener("click",async o=>{window.location.href="/settings.html"});f.addEventListener("mousedown",function(){if(a)return;const o=document.querySelectorAll(".card"),t=document.querySelectorAll(".img");for(let e of o)e.classList.add("force-hover");for(let e of t)e.classList.add("force-hover")});f.addEventListener("mouseup",function(){if(a)return;const o=document.querySelectorAll(".card"),t=document.querySelectorAll(".img");for(let e of o)e.classList.remove("force-hover");for(let e of t)e.classList.remove("force-hover")});f.addEventListener("mouseleave",function(){if(a)return;const o=document.querySelectorAll(".card"),t=document.querySelectorAll(".img");for(let e of o)e.classList.remove("force-hover");for(let e of t)e.classList.remove("force-hover")});let h=!1;f.addEventListener("click",function(){if(a){if(h){const o=document.querySelectorAll(".card"),t=document.querySelectorAll(".img");for(let e of o)e.classList.remove("force-hover");for(let e of t)e.classList.remove("force-hover")}else{const o=document.querySelectorAll(".card"),t=document.querySelectorAll(".img");for(let e of o)e.classList.add("force-hover");for(let e of t)e.classList.add("force-hover")}h=!h}});function A(o,t){return Math.floor(Math.random()*(t-o+1))+o}function B({x:o,y:t},e,s){for(let r=t-10;r<t+s+11;r+=10)for(let n=o-10;n<o+e+11;n+=10)r<window.innerHeight&&n<window.innerWidth&&r>=0&&n>=0&&(I[r][n]=!0)}function M(o,t,e,s){const r=[];for(let n=60;n<=s-t-30;n+=10)for(let c=30;c<=e-o-30;c+=10){let l=!0;for(let u=n;u<n+t;u+=10){for(let g=c;g<c+o;g+=10)if(I[u][g]){l=!1;break}if(!l)break}l&&r.push({x:c,y:n})}return r}function w(o,t){const e=document.createElement("div");e.classList.add("card"),e.textContent=t;for(let n of o)L(n,e,d,m);const s=M(d,m,window.innerWidth,window.innerHeight),r=s[A(0,s.length)];r!=null&&(B(r,d,m),e.style.left=`${r.x}px`,e.style.top=`${r.y}px`,k.appendChild(e))}function W(o,t,e){if(o>t)throw new Error("No se pueden generar n números únicos entre 0 y m-1 si n > m");const s=Array.from({length:t},(c,l)=>l);for(let c=s.length-1;c>0;c--){const l=Math.floor(Math.random()*(c+1));[s[c],s[l]]=[s[l],s[c]]}const r=[];let n=0;for(;r.length<o;)s[n]!=e&&r.push(s[n]),n++;return r}function P(o){const t=C(b());return x(q(t,o)).then(e=>e.exists()?e.val():(console.log("No data available"),0)).catch(e=>(console.error(e),0))}window.onload=async function(){a&&(document.getElementById("backgroundMusic").style.width="100px",document.getElementById("toggleHover").style.right="-30px",document.getElementById("headerText").style.width="70%",document.getElementById("headerText").style.position="absolute",document.getElementById("headerText").style.left="22%"),B({x:i.getBoundingClientRect().top-i.getBoundingClientRect().top%10,y:i.getBoundingClientRect().left-i.getBoundingClientRect().left%10},i.offsetHeight,i.offsetWidth),y.style.display="block";const o=v[A(0,v.length-1)];i.src=o;const t=Object.values(await P("/"));let e=0;for(let n=1;n<t.length;n++)t.at(n).timestamp>t.at(e).timestamp&&(e=n);const s=Math.min(6,t.length),r=W(s,t.length,e);w(Object.values(t.at(e).effects),t.at(e).message);for(let n=0;n<s;n++){const c=Object.values(t.at(r[n]).effects),l=t.at(r[n]).message;w(c,l)}y.style.display="none"};
