import{g as L}from"./cards-g4oblBOB.js";import{initializeApp as E}from"https://www.gstatic.com/firebasejs/9.15.0/firebase-app.js";import{getDatabase as b,ref as C,get as x,child as q}from"https://www.gstatic.com/firebasejs/9.15.0/firebase-database.js";import{GoogleAuthProvider as S,getAuth as j}from"https://www.gstatic.com/firebasejs/9.15.0/firebase-auth.js";const R={apiKey:"AIzaSyAc1-FWefRK9gNkaprncldWqK2jztLV43A",authDomain:"guesswhoitis-905ed.firebaseapp.com",databaseURL:"https://guesswhoitis-905ed-default-rtdb.firebaseio.com",projectId:"guesswhoitis-905ed",storageBucket:"guesswhoitis-905ed.firebasestorage.app",messagingSenderId:"72462712048",appId:"1:72462712048:web:a1ed1f84eb16b686b95635"},p=E(R);b(p);new S(p);j(p);const H=document.getElementById("container"),d=window.innerWidth>600?200:150,i=d==150,m=i?125:150,a=document.getElementById("backgroundMusic"),f=document.getElementById("toggleHover"),A=Array.from({length:window.innerHeight},()=>Array(window.innerWidth).fill(!1)),M=document.getElementById("settingsBtn"),y=document.getElementById("loader"),v=["https://shorturl.at/j0LqN","https://shorturl.at/VBilJ","https://shorturl.at/qIdRM","https://shorturl.at/y9yVX","https://shorturl.at/McxQY","https://shorturl.at/vCwM6","https://shorturl.at/OhVhZ","https://shorturl.at/HwR7s","https://shorturl.at/3uafl","https://shorturl.at/2sb2E","https://shorturl.at/6YjXc","https://shorturl.at/ACnGT"];M.addEventListener("click",async r=>{window.location.href="/settings.html"});f.addEventListener("mousedown",function(){if(i)return;const r=document.querySelectorAll(".card"),t=document.querySelectorAll(".img");for(let e of r)e.classList.add("force-hover");for(let e of t)e.classList.add("force-hover")});f.addEventListener("mouseup",function(){if(i)return;const r=document.querySelectorAll(".card"),t=document.querySelectorAll(".img");for(let e of r)e.classList.remove("force-hover");for(let e of t)e.classList.remove("force-hover")});f.addEventListener("mouseleave",function(){if(i)return;const r=document.querySelectorAll(".card"),t=document.querySelectorAll(".img");for(let e of r)e.classList.remove("force-hover");for(let e of t)e.classList.remove("force-hover")});let h=!1;f.addEventListener("click",function(){if(i){if(h){const r=document.querySelectorAll(".card"),t=document.querySelectorAll(".img");for(let e of r)e.classList.remove("force-hover");for(let e of t)e.classList.remove("force-hover")}else{const r=document.querySelectorAll(".card"),t=document.querySelectorAll(".img");for(let e of r)e.classList.add("force-hover");for(let e of t)e.classList.add("force-hover")}h=!h}});function I(r,t){return Math.floor(Math.random()*(t-r+1))+r}function B({x:r,y:t},e,n){for(let s=t-10;s<t+n+11;s+=10)for(let o=r-10;o<r+e+11;o+=10)s<window.innerHeight&&o<window.innerWidth&&s>=0&&o>=0&&(A[s][o]=!0)}function k(r,t,e,n){const s=[];for(let o=60;o<=n-t-30;o+=10)for(let c=30;c<=e-r-30;c+=10){let l=!0;for(let u=o;u<o+t;u+=10){for(let g=c;g<c+r;g+=10)if(A[u][g]){l=!1;break}if(!l)break}l&&s.push({x:c,y:o})}return s}function w(r,t,e){const n=document.createElement("div");n.classList.add("card"),e&&n.classList.add("glow"),n.textContent=t;for(let c of r)L(c,n,d,m);const s=k(d,m,window.innerWidth,window.innerHeight),o=s[I(0,s.length)];o!=null&&(B(o,d,m),n.style.left=`${o.x}px`,n.style.top=`${o.y}px`,H.appendChild(n))}function W(r,t,e){if(r>t)throw new Error("No se pueden generar n números únicos entre 0 y m-1 si n > m");const n=Array.from({length:t},(c,l)=>l);for(let c=n.length-1;c>0;c--){const l=Math.floor(Math.random()*(c+1));[n[c],n[l]]=[n[l],n[c]]}const s=[];let o=0;for(;s.length<r;)n[o]!=e&&s.push(n[o]),o++;return s}function P(r){const t=C(b());return x(q(t,r)).then(e=>e.exists()?e.val():(console.log("No data available"),0)).catch(e=>(console.error(e),0))}window.onload=async function(){i&&(document.getElementById("backgroundMusic").style.width="100px",document.getElementById("toggleHover").style.right="-30px",document.getElementById("headerText").style.width="70%",document.getElementById("headerText").style.position="absolute",document.getElementById("headerText").style.left="22%"),B({x:a.getBoundingClientRect().top-a.getBoundingClientRect().top%10,y:a.getBoundingClientRect().left-a.getBoundingClientRect().left%10},a.offsetHeight,a.offsetWidth),y.style.display="block";const r=v[I(0,v.length-1)];a.src=r;const t=Object.values(await P("/"));let e=0;for(let o=1;o<t.length;o++)t.at(o).timestamp>t.at(e).timestamp&&(e=o);const n=Math.min(6,t.length),s=W(n,t.length,e);w(Object.values(t.at(e).effects),t.at(e).message,!0);for(let o=0;o<n;o++){const c=Object.values(t.at(s[o]).effects),l=t.at(s[o]).message;w(c,l)}y.style.display="none"};
