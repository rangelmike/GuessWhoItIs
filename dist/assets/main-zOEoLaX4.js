import{g as j}from"./cards-BE1hCRJ6.js";import{initializeApp as T}from"https://www.gstatic.com/firebasejs/9.15.0/firebase-app.js";import{getDatabase as S,ref as y,get as x,child as N,push as P,remove as H}from"https://www.gstatic.com/firebasejs/9.15.0/firebase-database.js";import{GoogleAuthProvider as k,getAuth as q}from"https://www.gstatic.com/firebasejs/9.15.0/firebase-auth.js";const Q={apiKey:"AIzaSyAc1-FWefRK9gNkaprncldWqK2jztLV43A",authDomain:"guesswhoitis-905ed.firebaseapp.com",databaseURL:"https://guesswhoitis-905ed-default-rtdb.firebaseio.com",projectId:"guesswhoitis-905ed",storageBucket:"guesswhoitis-905ed.firebasestorage.app",messagingSenderId:"72462712048",appId:"1:72462712048:web:a1ed1f84eb16b686b95635"},w=T(Q),M=S(w);new k(w);q(w);const v=document.getElementById("container"),g=window.innerWidth>600?200:150,l=g==150,h=l?125:150,i=document.getElementById("backgroundMusic"),m=document.getElementById("toggleHover"),R=document.getElementById("refreshBtn"),f=Array.from({length:window.innerHeight},()=>Array(window.innerWidth).fill(!1)),W=document.getElementById("settingsBtn"),b=document.getElementById("loader"),A=["https://archive.org/download/ProjectTQM-NewMusic/girl%20in%20red%20-%20we%20fell%20in%20love%20in%20october.mp3","https://archive.org/download/te-amo-y-mas/Te%20Amo%20y%20M%C3%A1s.mp3","https://archive.org/download/ProjectTQM-NewMusic/Nasa%20Histoires%20-%20Bugambilia%20%28lyric%20video%20oficial%29.mp3 Bugambilia","https://archive.org/download/ProjectTQM-NewMusic/Tomando%20t%C3%A9%20%28cover%29%20%20Kumangy.mp3","https://archive.org/download/ProjectTQM-NewMusic/JVKE%20-%20her%20%28official%20lyric%20video%29.mp3","https://archive.org/download/ProjectTQM-NewMusic/Cody%20Fry%20-%20I%20Hear%20a%20Symphony%20%5BSub%20Espa%C3%B1olEnglish%5D.mp3","https://archive.org/download/ProjectTQM-NewMusic/Elefante%20-%20%C3%81ngel%20%28LetraLyrics%29.mp3","https://archive.org/download/ProjectTQM-NewMusic/Jake%20Daniels%20-%20Novia%20%28Lyrics%29.mp3","https://archive.org/download/ProjectTQM-NewMusic/Bruno%20Major%20-%20Nothing%20%28Lyric%20%26%20Chord%20Video%29.mp3","https://archive.org/download/ProjectTQM-NewMusic/Hoy%20Me%20Levante.mp3","https://archive.org/download/te-amo-y-mas/Te%20Amo%20y%20M%C3%A1s.mp3","https://archive.org/download/samanez-tus-ojitos-video-oficial-1/Samanez%20-%20Tus%20Ojitos%20%28Video%20Oficial%29%20%281%29.mp3"];W.addEventListener("click",async t=>{window.location.href="/settings.html"});m.addEventListener("mousedown",function(){if(l)return;const t=document.querySelectorAll(".card"),o=document.querySelectorAll(".img");for(let e of t)e.classList.add("force-hover");for(let e of o)e.classList.add("force-hover")});R.addEventListener("click",function(){I()});m.addEventListener("mouseup",function(){if(l)return;const t=document.querySelectorAll(".card"),o=document.querySelectorAll(".img");for(let e of t)e.classList.remove("force-hover");for(let e of o)e.classList.remove("force-hover")});m.addEventListener("mouseleave",function(){if(l)return;const t=document.querySelectorAll(".card"),o=document.querySelectorAll(".img");for(let e of t)e.classList.remove("force-hover");for(let e of o)e.classList.remove("force-hover")});let p=!1;m.addEventListener("click",function(){if(l){if(p){const t=document.querySelectorAll(".card"),o=document.querySelectorAll(".img");for(let e of t)e.classList.remove("force-hover");for(let e of o)e.classList.remove("force-hover")}else{const t=document.querySelectorAll(".card"),o=document.querySelectorAll(".img");for(let e of t)e.classList.add("force-hover");for(let e of o)e.classList.add("force-hover")}p=!p}});function L(t,o){return Math.floor(Math.random()*(o-t+1))+t}function C({x:t,y:o},e,n){for(let a=o-10;a<o+n+11;a+=10)for(let s=t-10;s<t+e+11;s+=10)a<window.innerHeight&&s<window.innerWidth&&a>=0&&s>=0&&(f[a][s]=!0)}function $(){for(let t=0;t<f.length;t++)for(let o=0;o<f[t].length;o++)f[t][o]=!1}function D(t,o,e,n){const a=[];for(let s=60;s<=n-o-30;s+=10)for(let r=30;r<=e-t-30;r+=10){let c=!0;for(let d=s;d<s+o;d+=10){for(let u=r;u<r+t;u+=10)if(f[d][u]){c=!1;break}if(!c)break}c&&a.push({x:r,y:s})}return a}function B(t,o,e){const n=document.createElement("div");n.classList.add("card"),e&&n.classList.add("glow"),n.textContent=o;for(let r of t)j(r,n,g,h);const a=D(g,h,window.innerWidth,window.innerHeight),s=a[L(0,a.length)];s!=null&&(C(s,g,h),n.style.left=`${s.x}px`,n.style.top=`${s.y}px`,v.appendChild(n))}function O(t,o,e){if(t>o)throw new Error("No se pueden generar n números únicos entre 0 y m-1 si n > m");const n=Array.from({length:o},(r,c)=>c);for(let r=n.length-1;r>0;r--){const c=Math.floor(Math.random()*(r+1));[n[r],n[c]]=[n[c],n[r]]}const a=[];let s=0;for(;a.length<t;)n[s]!=e&&a.push(n[s]),s++;return a}function E(t){const o=y(S());return x(N(o,t)).then(e=>e.exists()?e.val():(console.log("No data available"),0)).catch(e=>(console.error(e),0))}function V(t){const o=new Date(t),e=o.getFullYear(),n=String(o.getMonth()+1).padStart(2,"0"),a=String(o.getDate()).padStart(2,"0"),s=String(o.getHours()).padStart(2,"0"),r=String(o.getMinutes()).padStart(2,"0"),c=String(o.getSeconds()).padStart(2,"0");return`${e}-${n}-${a} ${s}:${r}:${c} `}async function z(){const t=Date.now();await P(y(M,"visits"),{[t]:V(t)});const o=Object.keys(await E("visits")),e=o.length-10;if(!(e<=0))for(let n=0;n<e;n++)H(y(M,`/visits/${o[n]}`))}async function I(){const t=Array.from(v.children).filter(r=>!r.classList.contains("card"));v.replaceChildren(...t),$(),l&&(document.getElementById("backgroundMusic").style.width="100px",document.getElementById("toggleHover").style.right="-30px",document.getElementById("headerText").style.width="70%",document.getElementById("headerText").style.position="absolute",document.getElementById("headerText").style.left="22%"),C({x:i.getBoundingClientRect().top-i.getBoundingClientRect().top%10,y:i.getBoundingClientRect().left-i.getBoundingClientRect().left%10},i.offsetHeight,i.offsetWidth),b.style.display="block";const o=await E("/");z();const e=Object.values(o.wallpaper);let n=0;for(let r=1;r<e.length;r++)e.at(r).timestamp>e.at(n).timestamp&&(n=r);const a=Math.min(6,e.length),s=O(a,e.length,n);B(Object.values(e.at(n).effects),e.at(n).message,!0);for(let r=0;r<a;r++){const c=Object.values(e.at(s[r]).effects),d=e.at(s[r]).message;B(c,d)}b.style.display="none"}window.onload=async function(){I();const t=A[L(0,A.length-1)];i.src=t};
