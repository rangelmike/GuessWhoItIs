import{g as j}from"./cards-BE1hCRJ6.js";import{initializeApp as C}from"https://www.gstatic.com/firebasejs/9.15.0/firebase-app.js";import{getDatabase as S,ref as p,get as E,child as T,push as x,remove as N}from"https://www.gstatic.com/firebasejs/9.15.0/firebase-database.js";import{GoogleAuthProvider as P,getAuth as H}from"https://www.gstatic.com/firebasejs/9.15.0/firebase-auth.js";const k={apiKey:"AIzaSyAc1-FWefRK9gNkaprncldWqK2jztLV43A",authDomain:"guesswhoitis-905ed.firebaseapp.com",databaseURL:"https://guesswhoitis-905ed-default-rtdb.firebaseio.com",projectId:"guesswhoitis-905ed",storageBucket:"guesswhoitis-905ed.firebasestorage.app",messagingSenderId:"72462712048",appId:"1:72462712048:web:a1ed1f84eb16b686b95635"},y=C(k),w=S(y);new P(y);H(y);const q=document.getElementById("container"),g=window.innerWidth>600?200:150,l=g==150,u=l?125:150,c=document.getElementById("backgroundMusic"),f=document.getElementById("toggleHover"),A=Array.from({length:window.innerHeight},()=>Array(window.innerWidth).fill(!1)),Q=document.getElementById("settingsBtn"),v=document.getElementById("loader"),M=["https://archive.org/download/ProjectTQM-NewMusic/girl%20in%20red%20-%20we%20fell%20in%20love%20in%20october.mp3","https://archive.org/download/te-amo-y-mas/Te%20Amo%20y%20M%C3%A1s.mp3","https://archive.org/download/ProjectTQM-NewMusic/Nasa%20Histoires%20-%20Bugambilia%20%28lyric%20video%20oficial%29.mp3 Bugambilia","https://archive.org/download/ProjectTQM-NewMusic/Tomando%20t%C3%A9%20%28cover%29%20%20Kumangy.mp3","https://archive.org/download/ProjectTQM-NewMusic/JVKE%20-%20her%20%28official%20lyric%20video%29.mp3","https://archive.org/download/ProjectTQM-NewMusic/Cody%20Fry%20-%20I%20Hear%20a%20Symphony%20%5BSub%20Espa%C3%B1olEnglish%5D.mp3","https://archive.org/download/ProjectTQM-NewMusic/Elefante%20-%20%C3%81ngel%20%28LetraLyrics%29.mp3","https://archive.org/download/ProjectTQM-NewMusic/Jake%20Daniels%20-%20Novia%20%28Lyrics%29.mp3","https://archive.org/download/ProjectTQM-NewMusic/Bruno%20Major%20-%20Nothing%20%28Lyric%20%26%20Chord%20Video%29.mp3","https://archive.org/download/ProjectTQM-NewMusic/Hoy%20Me%20Levante.mp3","https://archive.org/download/te-amo-y-mas/Te%20Amo%20y%20M%C3%A1s.mp3","https://archive.org/download/samanez-tus-ojitos-video-oficial-1/Samanez%20-%20Tus%20Ojitos%20%28Video%20Oficial%29%20%281%29.mp3"];Q.addEventListener("click",async o=>{window.location.href="/settings.html"});f.addEventListener("mousedown",function(){if(l)return;const o=document.querySelectorAll(".card"),t=document.querySelectorAll(".img");for(let e of o)e.classList.add("force-hover");for(let e of t)e.classList.add("force-hover")});f.addEventListener("mouseup",function(){if(l)return;const o=document.querySelectorAll(".card"),t=document.querySelectorAll(".img");for(let e of o)e.classList.remove("force-hover");for(let e of t)e.classList.remove("force-hover")});f.addEventListener("mouseleave",function(){if(l)return;const o=document.querySelectorAll(".card"),t=document.querySelectorAll(".img");for(let e of o)e.classList.remove("force-hover");for(let e of t)e.classList.remove("force-hover")});let h=!1;f.addEventListener("click",function(){if(l){if(h){const o=document.querySelectorAll(".card"),t=document.querySelectorAll(".img");for(let e of o)e.classList.remove("force-hover");for(let e of t)e.classList.remove("force-hover")}else{const o=document.querySelectorAll(".card"),t=document.querySelectorAll(".img");for(let e of o)e.classList.add("force-hover");for(let e of t)e.classList.add("force-hover")}h=!h}});function B(o,t){return Math.floor(Math.random()*(t-o+1))+o}function L({x:o,y:t},e,n){for(let a=t-10;a<t+n+11;a+=10)for(let s=o-10;s<o+e+11;s+=10)a<window.innerHeight&&s<window.innerWidth&&a>=0&&s>=0&&(A[a][s]=!0)}function R(o,t,e,n){const a=[];for(let s=60;s<=n-t-30;s+=10)for(let r=30;r<=e-o-30;r+=10){let i=!0;for(let d=s;d<s+t;d+=10){for(let m=r;m<r+o;m+=10)if(A[d][m]){i=!1;break}if(!i)break}i&&a.push({x:r,y:s})}return a}function b(o,t,e){const n=document.createElement("div");n.classList.add("card"),e&&n.classList.add("glow"),n.textContent=t;for(let r of o)j(r,n,g,u);const a=R(g,u,window.innerWidth,window.innerHeight),s=a[B(0,a.length)];s!=null&&(L(s,g,u),n.style.left=`${s.x}px`,n.style.top=`${s.y}px`,q.appendChild(n))}function $(o,t,e){if(o>t)throw new Error("No se pueden generar n números únicos entre 0 y m-1 si n > m");const n=Array.from({length:t},(r,i)=>i);for(let r=n.length-1;r>0;r--){const i=Math.floor(Math.random()*(r+1));[n[r],n[i]]=[n[i],n[r]]}const a=[];let s=0;for(;a.length<o;)n[s]!=e&&a.push(n[s]),s++;return a}function I(o){const t=p(S());return E(T(t,o)).then(e=>e.exists()?e.val():(console.log("No data available"),0)).catch(e=>(console.error(e),0))}function D(o){const t=new Date(o),e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),a=String(t.getDate()).padStart(2,"0"),s=String(t.getHours()).padStart(2,"0"),r=String(t.getMinutes()).padStart(2,"0"),i=String(t.getSeconds()).padStart(2,"0");return`${e}-${n}-${a} ${s}:${r}:${i} `}async function W(){const o=Date.now();await x(p(w,"visits"),{[o]:D(o)});const t=Object.keys(await I("visits")),e=t.length-10;if(!(e<=0))for(let n=0;n<e;n++)N(p(w,`/visits/${t[n]}`))}window.onload=async function(){l&&(document.getElementById("backgroundMusic").style.width="100px",document.getElementById("toggleHover").style.right="-30px",document.getElementById("headerText").style.width="70%",document.getElementById("headerText").style.position="absolute",document.getElementById("headerText").style.left="22%"),L({x:c.getBoundingClientRect().top-c.getBoundingClientRect().top%10,y:c.getBoundingClientRect().left-c.getBoundingClientRect().left%10},c.offsetHeight,c.offsetWidth),v.style.display="block";const o=M[B(0,M.length-1)];c.src=o;const t=await I("/");W();const e=Object.values(t.wallpaper);let n=0;for(let r=1;r<e.length;r++)e.at(r).timestamp>e.at(n).timestamp&&(n=r);const a=Math.min(6,e.length),s=$(a,e.length,n);b(Object.values(e.at(n).effects),e.at(n).message,!0);for(let r=0;r<a;r++){const i=Object.values(e.at(s[r]).effects),d=e.at(s[r]).message;b(i,d)}v.style.display="none"};
