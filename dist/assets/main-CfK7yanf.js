import{g as C}from"./cards-BE1hCRJ6.js";import{initializeApp as x}from"https://www.gstatic.com/firebasejs/9.15.0/firebase-app.js";import{getDatabase as A,ref as p,get as j,child as q,push as M,remove as R}from"https://www.gstatic.com/firebasejs/9.15.0/firebase-database.js";import{GoogleAuthProvider as H,getAuth as k}from"https://www.gstatic.com/firebasejs/9.15.0/firebase-auth.js";const W={apiKey:"AIzaSyAc1-FWefRK9gNkaprncldWqK2jztLV43A",authDomain:"guesswhoitis-905ed.firebaseapp.com",databaseURL:"https://guesswhoitis-905ed-default-rtdb.firebaseio.com",projectId:"guesswhoitis-905ed",storageBucket:"guesswhoitis-905ed.firebasestorage.app",messagingSenderId:"72462712048",appId:"1:72462712048:web:a1ed1f84eb16b686b95635"},y=x(W),v=A(y);new H(y);k(y);const $=document.getElementById("container"),u=window.innerWidth>600?200:150,l=u==150,m=l?125:150,i=document.getElementById("backgroundMusic"),f=document.getElementById("toggleHover"),I=Array.from({length:window.innerHeight},()=>Array(window.innerWidth).fill(!1)),T=document.getElementById("settingsBtn"),w=document.getElementById("loader"),b=["https://shorturl.at/j0LqN","https://shorturl.at/VBilJ","https://shorturl.at/qIdRM","https://shorturl.at/y9yVX","https://shorturl.at/McxQY","https://shorturl.at/vCwM6","https://shorturl.at/OhVhZ","https://shorturl.at/HwR7s","https://shorturl.at/3uafl","https://shorturl.at/2sb2E","https://shorturl.at/6YjXc","https://shorturl.at/ACnGT","https://shorturl.at/BWRPM","https://shorturl.at/TVAjm"];T.addEventListener("click",async o=>{window.location.href="/settings.html"});f.addEventListener("mousedown",function(){if(l)return;const o=document.querySelectorAll(".card"),e=document.querySelectorAll(".img");for(let t of o)t.classList.add("force-hover");for(let t of e)t.classList.add("force-hover")});f.addEventListener("mouseup",function(){if(l)return;const o=document.querySelectorAll(".card"),e=document.querySelectorAll(".img");for(let t of o)t.classList.remove("force-hover");for(let t of e)t.classList.remove("force-hover")});f.addEventListener("mouseleave",function(){if(l)return;const o=document.querySelectorAll(".card"),e=document.querySelectorAll(".img");for(let t of o)t.classList.remove("force-hover");for(let t of e)t.classList.remove("force-hover")});let h=!1;f.addEventListener("click",function(){if(l){if(h){const o=document.querySelectorAll(".card"),e=document.querySelectorAll(".img");for(let t of o)t.classList.remove("force-hover");for(let t of e)t.classList.remove("force-hover")}else{const o=document.querySelectorAll(".card"),e=document.querySelectorAll(".img");for(let t of o)t.classList.add("force-hover");for(let t of e)t.classList.add("force-hover")}h=!h}});function B(o,e){return Math.floor(Math.random()*(e-o+1))+o}function L({x:o,y:e},t,n){for(let a=e-10;a<e+n+11;a+=10)for(let s=o-10;s<o+t+11;s+=10)a<window.innerHeight&&s<window.innerWidth&&a>=0&&s>=0&&(I[a][s]=!0)}function V(o,e,t,n){const a=[];for(let s=60;s<=n-e-30;s+=10)for(let r=30;r<=t-o-30;r+=10){let c=!0;for(let d=s;d<s+e;d+=10){for(let g=r;g<r+o;g+=10)if(I[d][g]){c=!1;break}if(!c)break}c&&a.push({x:r,y:s})}return a}function S(o,e,t){const n=document.createElement("div");n.classList.add("card"),t&&n.classList.add("glow"),n.textContent=e;for(let r of o)C(r,n,u,m);const a=V(u,m,window.innerWidth,window.innerHeight),s=a[B(0,a.length)];s!=null&&(L(s,u,m),n.style.left=`${s.x}px`,n.style.top=`${s.y}px`,$.appendChild(n))}function D(o,e,t){if(o>e)throw new Error("No se pueden generar n números únicos entre 0 y m-1 si n > m");const n=Array.from({length:e},(r,c)=>c);for(let r=n.length-1;r>0;r--){const c=Math.floor(Math.random()*(r+1));[n[r],n[c]]=[n[c],n[r]]}const a=[];let s=0;for(;a.length<o;)n[s]!=t&&a.push(n[s]),s++;return a}function E(o){const e=p(A());return j(q(e,o)).then(t=>t.exists()?t.val():(console.log("No data available"),0)).catch(t=>(console.error(t),0))}function P(o){const e=new Date(o),t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0"),s=String(e.getHours()).padStart(2,"0"),r=String(e.getMinutes()).padStart(2,"0"),c=String(e.getSeconds()).padStart(2,"0");return`${t}-${n}-${a} ${s}:${r}:${c} `}async function O(){const o=Date.now();await M(p(v,"visits"),{[o]:P(o)});const e=Object.keys(await E("visits")),t=e.length-10;if(!(t<=0))for(let n=0;n<t;n++)R(p(v,`/visits/${e[n]}`))}window.onload=async function(){l&&(document.getElementById("backgroundMusic").style.width="100px",document.getElementById("toggleHover").style.right="-30px",document.getElementById("headerText").style.width="70%",document.getElementById("headerText").style.position="absolute",document.getElementById("headerText").style.left="22%"),L({x:i.getBoundingClientRect().top-i.getBoundingClientRect().top%10,y:i.getBoundingClientRect().left-i.getBoundingClientRect().left%10},i.offsetHeight,i.offsetWidth),w.style.display="block";const o=b[B(0,b.length-1)];i.src=o;const e=await E("/");O();const t=Object.values(e.wallpaper);let n=0;for(let r=1;r<t.length;r++)t.at(r).timestamp>t.at(n).timestamp&&(n=r);const a=Math.min(6,t.length),s=D(a,t.length,n);S(Object.values(t.at(n).effects),t.at(n).message,!0);for(let r=0;r<a;r++){const c=Object.values(t.at(s[r]).effects),d=t.at(s[r]).message;S(c,d)}w.style.display="none"};
