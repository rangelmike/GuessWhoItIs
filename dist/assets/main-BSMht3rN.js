import{g as I}from"./cards-g4oblBOB.js";import{initializeApp as B}from"https://www.gstatic.com/firebasejs/9.15.0/firebase-app.js";import{getDatabase as w,ref as L,get as E,child as C}from"https://www.gstatic.com/firebasejs/9.15.0/firebase-database.js";import{GoogleAuthProvider as x,getAuth as S}from"https://www.gstatic.com/firebasejs/9.15.0/firebase-auth.js";const q={apiKey:"AIzaSyAc1-FWefRK9gNkaprncldWqK2jztLV43A",authDomain:"guesswhoitis-905ed.firebaseapp.com",databaseURL:"https://guesswhoitis-905ed-default-rtdb.firebaseio.com",projectId:"guesswhoitis-905ed",storageBucket:"guesswhoitis-905ed.firebasestorage.app",messagingSenderId:"72462712048",appId:"1:72462712048:web:a1ed1f84eb16b686b95635"},p=B(q);w(p);new x(p);S(p);const j=document.getElementById("container"),d=window.innerWidth>600?200:150,a=d==150,m=a?125:150,l=document.getElementById("backgroundMusic"),f=document.getElementById("toggleHover"),b=Array.from({length:window.innerHeight},()=>Array(window.innerWidth).fill(!1)),k=document.getElementById("settingsBtn"),y=document.getElementById("loader");k.addEventListener("click",async e=>{window.location.href="/settings.html"});f.addEventListener("mousedown",function(){if(a)return;const e=document.querySelectorAll(".card"),o=document.querySelectorAll(".img");for(let t of e)t.classList.add("force-hover");for(let t of o)t.classList.add("force-hover")});f.addEventListener("mouseup",function(){if(a)return;const e=document.querySelectorAll(".card"),o=document.querySelectorAll(".img");for(let t of e)t.classList.remove("force-hover");for(let t of o)t.classList.remove("force-hover")});f.addEventListener("mouseleave",function(){if(a)return;const e=document.querySelectorAll(".card"),o=document.querySelectorAll(".img");for(let t of e)t.classList.remove("force-hover");for(let t of o)t.classList.remove("force-hover")});let h=!1;f.addEventListener("click",function(){if(a){if(h){const e=document.querySelectorAll(".card"),o=document.querySelectorAll(".img");for(let t of e)t.classList.remove("force-hover");for(let t of o)t.classList.remove("force-hover")}else{const e=document.querySelectorAll(".card"),o=document.querySelectorAll(".img");for(let t of e)t.classList.add("force-hover");for(let t of o)t.classList.add("force-hover")}h=!h}});function H(e,o){return Math.floor(Math.random()*(o-e+1))+e}function A({x:e,y:o},t,r){for(let n=o-10;n<o+r+11;n+=10)for(let s=e-10;s<e+t+11;s+=10)n<window.innerHeight&&s<window.innerWidth&&n>=0&&s>=0&&(b[n][s]=!0)}function R(e,o,t,r){const n=[];for(let s=60;s<=r-o-30;s+=10)for(let c=30;c<=t-e-30;c+=10){let i=!0;for(let u=s;u<s+o;u+=10){for(let g=c;g<c+e;g+=10)if(b[u][g]){i=!1;break}if(!i)break}i&&n.push({x:c,y:s})}return n}function v(e,o,t){const r=document.createElement("div");r.classList.add("card"),t&&r.classList.add("glow"),r.textContent=o;for(let c of e)I(c,r,d,m);const n=R(d,m,window.innerWidth,window.innerHeight),s=n[H(0,n.length)];s!=null&&(A(s,d,m),r.style.left=`${s.x}px`,r.style.top=`${s.y}px`,j.appendChild(r))}function W(e,o,t){if(e>o)throw new Error("No se pueden generar n números únicos entre 0 y m-1 si n > m");const r=Array.from({length:o},(c,i)=>i);for(let c=r.length-1;c>0;c--){const i=Math.floor(Math.random()*(c+1));[r[c],r[i]]=[r[i],r[c]]}const n=[];let s=0;for(;n.length<e;)r[s]!=t&&n.push(r[s]),s++;return n}function M(e){const o=L(w());return E(C(o,e)).then(t=>t.exists()?t.val():(console.log("No data available"),0)).catch(t=>(console.error(t),0))}window.onload=async function(){a&&(document.getElementById("backgroundMusic").style.width="100px",document.getElementById("toggleHover").style.right="-30px",document.getElementById("headerText").style.width="70%",document.getElementById("headerText").style.position="absolute",document.getElementById("headerText").style.left="22%"),A({x:l.getBoundingClientRect().top-l.getBoundingClientRect().top%10,y:l.getBoundingClientRect().left-l.getBoundingClientRect().left%10},l.offsetHeight,l.offsetWidth),y.style.display="block";const e=Object.values(await M("/"));let o=0;for(let n=1;n<e.length;n++)e.at(n).timestamp>e.at(o).timestamp&&(o=n);const t=Math.min(6,e.length),r=W(t,e.length,o);v(Object.values(e.at(o).effects),e.at(o).message,!0);for(let n=0;n<t;n++){const s=Object.values(e.at(r[n]).effects),c=e.at(r[n]).message;v(s,c)}y.style.display="none"};
