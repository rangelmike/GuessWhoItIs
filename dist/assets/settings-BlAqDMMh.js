import{g as B,r as W}from"./cards-BE1hCRJ6.js";import{getDatabase as j,ref as x,get as z,child as F,update as K,push as _,remove as G}from"https://www.gstatic.com/firebasejs/9.15.0/firebase-database.js";import{initializeApp as q}from"https://www.gstatic.com/firebasejs/9.15.0/firebase-app.js";import{GoogleAuthProvider as S,getAuth as U,signOut as O,signInWithPopup as X}from"https://www.gstatic.com/firebasejs/9.15.0/firebase-auth.js";const $={apiKey:"AIzaSyAc1-FWefRK9gNkaprncldWqK2jztLV43A",authDomain:"guesswhoitis-905ed.firebaseapp.com",databaseURL:"https://guesswhoitis-905ed-default-rtdb.firebaseio.com",projectId:"guesswhoitis-905ed",storageBucket:"guesswhoitis-905ed.firebasestorage.app",messagingSenderId:"72462712048",appId:"1:72462712048:web:a1ed1f84eb16b686b95635"},H=q($),J=new S(H),M=U(H),y=j(H),Q=document.getElementById("logoutBtn"),E=document.getElementById("addCard"),L=document.getElementById("container"),C=window.innerWidth>600?200:150,I=C==200?150:125,h=["Angel Wings","Halo","Clock","Music Notes","Spotlight","Sun","MultiHearts","Pumping Heart","Stars","Rose","Gift","Kiss"],Y='<p class="effectText">Pumping Heart</p><svg class="w-6 h-6 text-gray-800 dark:text-white svg" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M2 12C2 6.477 6.477 2 12 2s10 4.477 10 10-4.477 10-10 10S2 17.523 2 12Zm5.757-1a1 1 0 1 0 0 2h8.486a1 1 0 1 0 0-2H7.757Z" clip-rule="evenodd"></path> </svg>',ee='  <svg xmlns="http://www.w3.org/2000/svg" width="20" viewBox="0 0 20 20" height="20" fill="none" class="svg-icon"><g stroke-width="1.5" stroke-linecap="round" stroke="#de8a2a"><circle r="7.5" cy="10" cx="10"></circle><path d="m9.99998 7.5v5"></path><path d="m7.5 9.99998h5"></path></g></svg><span class="lable">Add</span>',te=' <svg xmlns="http://www.w3.org/2000/svg"fill="none"viewBox="0 0 39 7"class="bin-top"><line stroke-width="4" stroke="white" y2="5" x2="39" y1="5"></line><line stroke-width="3"stroke="white"y2="1.5"x2="26.0357"y1="1.5"x1="12"></line></svg><svg xmlns="http://www.w3.org/2000/svg"fill="none"viewBox="0 0 33 39"class="bin-bottom"><mask fill="white" id="path-1-inside-1_8_19"><path d="M0 0H33V35C33 37.2091 31.2091 39 29 39H4C1.79086 39 0 37.2091 0 35V0Z"></path></mask><path mask="url(#path-1-inside-1_8_19)"fill="white"d="M0 0H33H0ZM37 35C37 39.4183 33.4183 43 29 43H4C-0.418278 43 -4 39.4183 -4 35H4H29H37ZM4 43C-0.418278 43 -4 39.4183 -4 35V0H4V35V43ZM37 0V35C37 39.4183 33.4183 43 29 43V35V0H37Z"></path><path stroke-width="4" stroke="white" d="M12 6L12 29"></path><path stroke-width="4" stroke="white" d="M21 6V29"></path></svg><svg xmlns="http://www.w3.org/2000/svg"fill="none"viewBox="0 0 89 80" class="garbage"><path fill="white" d="M20.5 10.5L37.5 15.5L42.5 11.5L51.5 12.5L68.75 0L72 11.5L79.5 12.5H88.5L87 22L68.75 31.5L75.5066 25L86 26L87 35.5L77.5 48L70.5 49.5L80 50L77.5 71.5L63.5 58.5L53.5 68.5L65.5 70.5L45.5 73L35.5 79.5L28 67L16 63L12 51.5L0 48L16 25L22.5 17L20.5 10.5Z"></path></svg>';function ne(t){const a=x(j());return z(F(a,t)).then(n=>n.exists()?n.val():(console.log("No data available"),0)).catch(n=>(console.error(n),0))}function se(t,a,n){const i=Date.now();K(x(y,t),{effects:a,message:n,timestamp:i})}function ie(t,a){const n=Date.now();return _(x(y,"/"),{effects:t,message:a,timestamp:n}).key}function oe(t){G(x(y,t))}function P(t,a,n){const i=document.createElement("select"),e=document.createElement("div"),l=document.createElement("h4"),s=document.createElement("div");e.classList.add("cardDiv"),e.classList.add("hiding"),s.classList.add("card");const d=document.createElement("P");d.textContent=a,s.appendChild(d);for(let o of t)B(o,s,C,I);t.length||B(0,s,C,I),l.textContent=a,l.addEventListener("click",()=>{e.classList.contains("showing")?(e.classList.remove("showing"),e.classList.add("hiding")):(e.classList.contains("hiding")&&e.classList.remove("hiding"),e.classList.add("showing"))});const r=document.createElement("div"),D=document.createElement("p"),f=document.createElement("input");D.textContent="Mensaje:",f.value=a,f.addEventListener("change",function(){d.textContent=f.value}),r.appendChild(D),r.appendChild(f);const p=document.createElement("div"),T=document.createElement("p");p.classList="effectsDiv",T.textContent="Efectos: ",p.appendChild(T);function V(o){const c=document.createElement("button");c.classList="Btn",c.innerHTML=Y;const Z=c.querySelector(".effectText");Z.textContent=h[o-1],c.addEventListener("click",function(){const w=h.indexOf(Z.textContent)+1;t=t.filter(R=>R!==w),W(s,w);const b=document.createElement("option");b.value=w,b.textContent=h[w-1],i.appendChild(b),p.removeChild(c)}),p.appendChild(c)}for(let o of t)V(o);const A=document.createElement("p"),m=document.createElement("div"),N=document.createElement("p"),u=document.createElement("button");u.classList="button",u.innerHTML=ee,m.classList="effectsDiv",A.textContent="Nuevo efecto: ",N.textContent="Última actualización: ",m.appendChild(A);for(let o=0;o<h.length;o++){if(t.includes(o+1))continue;const c=document.createElement("option");c.id=`n${o}`,c.value=o+1,c.textContent=h[o],i.appendChild(c)}u.addEventListener("click",function(){if(i.options.length){t.push(parseInt(i.value)),B(parseInt(i.value),s,C,I),V(parseInt(i.value));const o=i.options[i.selectedIndex];o&&o.remove()}}),m.appendChild(i),m.appendChild(u);const g=document.createElement("div");g.classList="effectsDiv";const k=document.createElement("button");k.textContent="Confirmar",g.appendChild(k),k.addEventListener("click",function(){e.classList.contains("showing")?(e.classList.remove("showing"),e.classList.add("hiding")):(e.classList.contains("hiding")&&e.classList.remove("hiding"),e.classList.add("showing")),l.textContent=d.textContent,n==-1?n=ie(t,d.textContent):se("/"+n,t,d.textContent)});const v=document.createElement("button");v.classList="bin-button",v.innerHTML=te,g.appendChild(v),v.addEventListener("click",function(){L.removeChild(l),L.removeChild(e),n!=-1&&oe(n)}),e.appendChild(r),e.appendChild(N),e.appendChild(p),e.appendChild(m),e.appendChild(s),e.appendChild(g),L.insertBefore(l,E),L.insertBefore(e,E)}async function ae(t){t.uid!=="lpxjXmLNAibp7UGgRs2Pk4bN0kd2"&&(O(M),window.location.href="index.html"),E.style.display="block";const a=await ne("/"),n=Object.entries(a);n.sort(([,s],[,d])=>s.timestamp-d.timestamp);const i=n.map(([,s])=>s),e=n.map(([s])=>s),l=i.length;for(let s=0;s<l;s++){const d=Object.values(i.at(s).effects),r=i.at(s).message;P(d,r,e.at(s))}}Q.addEventListener("click",()=>{O(M),window.location.href="index.html"});E.addEventListener("click",function(){P([],"New Card",-1)});document.getElementById("signInBtn").addEventListener("click",async()=>{await X(M,J).then(async t=>{S.credentialFromResult(t).accessToken;const n=t.user;ae(n),document.getElementById("signInBtn").style.display="none"}).catch(t=>{t.code;const a=t.message;alert(a)})});document.getElementById("backBtn").addEventListener("click",()=>{window.location.href="index.html"});
